{% extends "songs/base.html" %}

{% block script %}
window.setTimeout(function() {
    if (!document.hidden && document.hasFocus()) {
        window.location.reload();
    } else {
        window.addEventListener("focus", function() {
            window.location.reload();
        });
    }
}, 5000);
{% endblock %}

{% block title %}Queue{% endblock %}
{% block headerTitle %}Queue{% endblock %}

{% block content %}

<p>Paused: {{ paused }}</p>

<p>Auto Related Next: {{ improvised }} | <a href="{% url 'songs:improvise_api' %}">Toggle</a></p>

<p><a href="{% url 'songs:improvise_now_api' %}">Add related song</a></p>

{% if paused %}
<a href="{% url 'songs:resume_api' %}">▶️ </a>
{% else %}
<a href="{% url 'songs:pause_api' %}">⏸️ </a>
{% endif %}
<a href="{% url 'songs:skip_api' %}">⏭️ </a>


<p>Curently Playing: <a href="{% url 'songs:song' song_curr_id %}">{{ song_curr }}</a> [listened {{ song_curr_timed }}]</p>

{% for song in playlists %}
    <li><a href="{% url 'songs:song' song.id %}"> {{ song }} </a></li>
{% endfor %}
{% endblock %}
